import{C as c,f as B,B as I,g as v,L as D,p as S,h as T,j as y}from"./vendor_chartjs-pNrZhbib.js";import{p as d}from"./vendor-BpA6V8xu.js";c.register(B,I,v,D,S,T,d);let i=null;function f(t){return t>=1e9?(t/1e9).toFixed(1).replace(/\.0$/,"")+" B":t>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+" M":t>=1e3?(t/1e3).toFixed(0)+" K":t.toLocaleString("id-ID")}function x(t,n){setTimeout(()=>{const a=document.getElementById("hpsChart");if(!a)return;const e=a.getContext("2d"),r={type:"bar",data:{labels:t,datasets:[{label:"Total HPS",data:n.hps,backgroundColor:"#3b82f6",borderColor:"#2563eb",borderWidth:1},{label:"Total HPS Nego",data:n.hps_nego,backgroundColor:"#10b981",borderColor:"#059669",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:o=>f(o)}}},plugins:{datalabels:{anchor:"end",align:"top",color:"#333",font:{weight:"bold"},formatter:o=>f(o)}}},plugins:[d]};i?(i.data.labels=t,i.data.datasets[0].data=n.hps,i.data.datasets[1].data=n.hps_nego,i.update()):i=new c(e,r)},300)}function w(t,n){x(t,n),Livewire.on("refreshHpsChart",({labels:e,data:s})=>{x(e,s)});const a=document.getElementById("export-chart-btn");a&&a.addEventListener("click",()=>{setTimeout(()=>{const e=document.getElementById("hpsChart");if(!e){console.warn("hps canvas belum ditemukan.");return}const s=e.toDataURL("image/png");Livewire.dispatch("exportHpsChartPdf",{image:s})},300)})}c.register(...y,d);let l=null;function E(t,n){setTimeout(()=>{var r;const a=(r=document.getElementById("statusChart"))==null?void 0:r.getContext("2d");if(!a)return;const s={type:"bar",data:{labels:t,datasets:[{label:"Jumlah Ajuan per Status",data:n,backgroundColor:["#36A2EB","#FF6384","#FFCE56","#4BC0C0","#9966FF","#FF9F40"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0}}},plugins:{legend:{display:!1},title:{display:!0,text:"Distribusi Ajuan berdasarkan Status"},datalabels:{anchor:"end",align:"center",color:"#333",font:{weight:"bold"},formatter:o=>o.toLocaleString("id-ID")}}},plugins:[d]};l?(l.data.labels=t,l.data.datasets[0].data=n,l.update()):l=new c(a,s)},300)}function _(t,n){E(t,n),Livewire.on("refreshStatusChart",({labels:e,data:s})=>{E(e,s)});const a=document.getElementById("export-chart-status-btn");a&&a.addEventListener("click",()=>{setTimeout(()=>{const e=document.getElementById("statusChart");if(!e){console.warn("status canvas belum ditemukan.");return}const s=e.toDataURL("image/png");Livewire.dispatch("exportStatusChartPdf",{image:s})},300)})}c.register(...y,d);let u=null;function L(t,n){setTimeout(()=>{const a=document.getElementById("jatuhTempoChart");if(!a){console.warn("Canvas belum tersedia saat render dipanggil.");return}const e=a.getContext("2d"),r={type:"bar",data:{labels:t,datasets:[{label:"Jumlah Ajuan Jatuh Tempo",data:n,backgroundColor:"#f59e0b",borderColor:"#d97706",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0}}},plugins:{datalabels:{anchor:"end",align:"center",color:"#000",font:{weight:"bold",size:12},formatter:o=>o.toLocaleString("id-ID")}}},plugins:[d]};u?(u.data.labels=t,u.data.datasets[0].data=n,u.update()):u=new c(e,r),Livewire.dispatch("jatuhTempoChartRendered")},300)}function k(t,n){L(t,n),Livewire.on("refreshJatuhTempoChart",({labels:e,data:s})=>{L(e,s)});const a=document.getElementById("export-chart-tempo-btn");a&&a.addEventListener("click",()=>{setTimeout(()=>{const e=document.getElementById("jatuhTempoChart");if(!e){console.warn("tempo canvas belum ditemukan.");return}const s=e.toDataURL("image/png");Livewire.dispatch("exportJatuhTempoChartPdf",{image:s})},300)})}function J(){const t=()=>{var p,h,m,g,b,C;const n=JSON.parse(((p=document.getElementById("hpsChartLabels"))==null?void 0:p.textContent)||"[]"),a=JSON.parse(((h=document.getElementById("hpsChartData"))==null?void 0:h.textContent)||"[]");w(n,a);const e=JSON.parse(((m=document.getElementById("statusChartLabels"))==null?void 0:m.textContent)||"[]"),s=JSON.parse(((g=document.getElementById("statusChartData"))==null?void 0:g.textContent)||"[]");_(e,s);const r=JSON.parse(((b=document.getElementById("jatuhTempoChartLabels"))==null?void 0:b.textContent)||"[]"),o=JSON.parse(((C=document.getElementById("jatuhTempoChartData"))==null?void 0:C.textContent)||"[]");k(r,o)};t(),document.addEventListener("livewire:init",t)}function A(){J()}export{A as default};
